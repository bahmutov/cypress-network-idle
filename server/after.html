<html>
  <head>
    <title>After</title>
  </head>
  <body>
    <h1>cypress-network-idle after</h1>
    <button id="fetch">Fetch</button>
    <p>
      Wait for N milliseconds before making the call
      <input type="number" id="fetch-delay" value="0" />
    </p>
    <p>
      Make the call last M milliseconds
      <input type="number" id="server-delay" value="0" />
    </p>
    <script>
      document.getElementById('fetch').addEventListener('click', () => {
        const fetchDelay =
          document.getElementById('fetch-delay').valueAsNumber || 100
        const serverDelay =
          document.getElementById('server-delay').valueAsNumber || 100
        setTimeout(() => {
          fetch('/after/' + serverDelay)
        }, fetchDelay)
      })
    </script>
  </body>
</html>
